<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Internet of Things</title>
    <link rel="stylesheet" href="style1.css" />
  </head>
  <body>
    <div class="container">
      <div class="navbar">
        <a href="home.html"
          ><img src="image/image3.png" alt="" style="width: 200px"
        /></a>
        <nav></nav>
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <div class="navbar-nav">
            <a
              href="setting.html"
              class="nav-item nav-link"
              style="
                color: #707070;
                font-weight: bold;
                margin-right: 20px;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              "
              >SETTING</a
            >
            <a
              href="rakap.html"
              class="nav-item nav-link"
              style="
                color: #707070;
                font-weight: bold;
                margin-right: 20px;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              "
              >REKAP</a
            >
            <a
              href="index.html"
              class="nav-item nav-link"
              style="
                color: #707070;
                font-weight: bold;
                margin-right: 20px;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              "
              >LOGOUT</a
            >
          </div>
        </div>
      </div>
      <h1 style="color: #707070; font-size: 20px; margin-top: 20px">
        REKAPITULASI
      </h1>
      <div class="row">
        <div
          class="col-6"
          style="
            background-color: lightblue;
            height: 400px;
            width: 300px;
            border-radius: 10px;
            box-shadow: 20px;
            margin-right: 10px;
          "
        >
          <h1
            style="
              font-size: 20px;
              margin-left: 20px;
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              color: #707070;
            "
          >
            Tahun
          </h1>
          <select
            name="pilihtahun"
            id="pilihtahun"
            style="
              font-size: 20px;
              margin-left: 20px;
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              color: #707070;
              width: 250px;
            "
          >
            <option value="2021" nama="Tahun">2021</option>
            <option value="2022" nama="Tahun">2022</option>
            <option value="2023" nama="Tahun">2023</option>
            <option value="2024" nama="Tahun">2024</option>
            <option value="2025" nama="Tahun">2025</option>
            <option value="2026" nama="Tahun">2026</option>
            <option value="2027" nama="Tahun">2027</option>
            <option value="2028" nama="Tahun">2028</option>
            <option value="2029" nama="Tahun">2029</option>
            <option value="2030" nama="Tahun">2030</option>
            <option value="2031" nama="Tahun">2031</option>
            <option value="2032" nama="Tahun">2032</option>
            <option value="2033" nama="Tahun">2033</option>
            <option value="2034" nama="Tahun">2034</option>
            <option value="2035" nama="Tahun">2035</option>
            <option value="2036" nama="Tahun">2036</option>
            <option value="2037" nama="Tahun">2037</option>
            <option value="2038" nama="Tahun">2038</option>
            <option value="2039" nama="Tahun">2039</option>
            <option value="2040" nama="Tahun">2040</option>
            <option value="2041" nama="Tahun">2041</option>
            <option value="2042" nama="Tahun">2042</option>
            <option value="2043" nama="Tahun">2043</option>
            <option value="2044" nama="Tahun">2044</option>
            <option value="2045" nama="Tahun">2045</option>
            <option value="2046" nama="Tahun">2046</option>
            <option value="2047" nama="Tahun">2047</option>
            <option value="2048" nama="Tahun">2048</option>
            <option value="2049" nama="Tahun">2049</option>
            <option value="2050" nama="Tahun">2050</option>
          </select>
          <h1
            style="
              font-size: 20px;
              margin-left: 20px;
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              color: #707070;
            "
          >
            Bulan
          </h1>
          <select
            name="pilihbulan"
            id="pilihbulan"
            style="
              font-size: 20px;
              margin-left: 20px;
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              color: #707070;
              width: 250px;
            "
          >
            <option value="January" nama="Bulan">January</option>
            <option value="February" nama="Bulan">February</option>
            <option value="March" nama="Bulan">March</option>
            <option value="April" nama="Bulan">April</option>
            <option value="May" nama="Bulan">May</option>
            <option value="June" nama="Bulan">June</option>
            <option value="July" nama="Bulan">July</option>
            <option value="August" nama="Bulan">August</option>
            <option value="September" nama="Bulan">September</option>
            <option value="October" nama="Bulan">October</option>
            <option value="November" nama="Bulan">November</option>
            <option value="December" nama="Bulan">December</option>
          </select>
          <h1
            style="
              font-size: 20px;
              margin-left: 20px;
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              color: #707070;
            "
          >
            Hari ke-
          </h1>
          <select
            name="pilihhari"
            id="pilihhari"
            style="
              font-size: 20px;
              margin-left: 20px;
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              color: #707070;
              width: 250px;
            "
          >
            <option value="1" nama="Tahun">1</option>
            <option value="2" nama="Tahun">2</option>
            <option value="3" nama="Tahun">3</option>
            <option value="4" nama="Tahun">4</option>
            <option value="5" nama="Tahun">5</option>
            <option value="6" nama="Tahun">6</option>
            <option value="7" nama="Tahun">7</option>
            <option value="8" nama="Tahun">8</option>
            <option value="9" nama="Tahun">9</option>
            <option value="10" nama="Tahun">10</option>
            <option value="11" nama="Tahun">11</option>
            <option value="12" nama="Tahun">12</option>
            <option value="13" nama="Tahun">13</option>
            <option value="14" nama="Tahun">14</option>
            <option value="15" nama="Tahun">15</option>
            <option value="16" nama="Tahun">16</option>
            <option value="17" nama="Tahun">17</option>
            <option value="18" nama="Tahun">18</option>
            <option value="19" nama="Tahun">19</option>
            <option value="20" nama="Tahun">20</option>
            <option value="21" nama="Tahun">21</option>
            <option value="22" nama="Tahun">22</option>
            <option value="23" nama="Tahun">23</option>
            <option value="24" nama="Tahun">24</option>
            <option value="25" nama="Tahun">25</option>
            <option value="26" nama="Tahun">26</option>
            <option value="27" nama="Tahun">27</option>
            <option value="28" nama="Tahun">28</option>
            <option value="29" nama="Tahun">29</option>
            <option value="30" nama="Tahun">30</option>
            <option value="31" nama="Tahun">31</option>
          </select>
          <button
            style="
              margin-top: 40px;
              background-color: greenyellow;
              height: 40px;
              width: 250px;
              margin-left: 20px;
              margin-right: 20px;
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              font-weight: bold;
              border-radius: 10px;
            "
            onclick="Rekap()"
          >
            PILIH
          </button>
        </div>
        <div
          class="col-1"
          style="background-color: white; width: 400px; height: 400px"
        >
          <h1
            style="
              color: #707070;
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              text-align: center;
              font-size: 20px;
            "
          >
            KISARAN TOTAL BIAYA HARIAN
          </h1>
          <h1
            style="
              color: #707070;
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              text-align: center;
              font-size: 50px;
            "
            id="biayabulanan"
          >
            0
          </h1>
          <div class="row">
            <div
              class="col"
              style="
                background-color: lightgreen;
                height: 200px;
                border-radius: 10px;
              "
            >
              <h1
                style="
                  color: #707070;
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                  font-size: 18px;
                  text-align: center;
                  padding-top: 20px;
                  padding-left: 20px;
                  padding-right: 20px;
                "
              >
                Biaya Halaman (Rupiah)
              </h1>
              <h1
                style="
                  color: #707070;
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                  font-size: 25px;
                  text-align: center;
                  padding: 10px;
                "
                id="biayaharianhalaman"
              >
                0
              </h1>
              <h1
                style="
                  color: #707070;
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                  font-size: 25px;
                  text-align: center;
                "
              >
                /Hari
              </h1>
            </div>
            <div
              class="col"
              style="
                background-color: lightgoldenrodyellow;
                height: 200px;
                border-radius: 10px;
              "
            >
              <h1
                style="
                  color: #707070;
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                  font-size: 18px;
                  text-align: center;
                  padding-top: 20px;
                  padding-left: 20px;
                  padding-right: 20px;
                "
              >
                Biaya Ruang Tamu (Rupiah)
              </h1>
              <h1
                style="
                  color: #707070;
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                  font-size: 25px;
                  text-align: center;
                  padding: 10px;
                "
                id="biayaharianruangtamu"
              >
                0
              </h1>
              <h1
                style="
                  color: #707070;
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                  font-size: 25px;
                  text-align: center;
                "
              >
                /Hari
              </h1>
            </div>
            <div
              class="col"
              style="
                background-color: lightpink;
                height: 200px;
                border-radius: 10px;
              "
            >
              <h1
                style="
                  color: #707070;
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                  font-size: 18px;
                  padding-top: 20px;
                  padding-left: 20px;
                  padding-right: 20px;
                  text-align: center;
                "
              >
                Biaya Pump (Rupiah)
              </h1>
              <h1
                style="
                  color: #707070;
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                  font-size: 25px;
                  text-align: center;
                  padding: 10px;
                "
                id="biayaharianpump"
              >
                0
              </h1>
              <h1
                style="
                  color: #707070;
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                  font-size: 25px;
                  text-align: center;
                "
              >
                /Hari
              </h1>
            </div>
          </div>
        </div>
      </div>
      <p style="color: white" id="nilairelay1"></p>
      <p style="color: white" id="nilairelay2"></p>
      <p style="color: white" id="nilairelay3"></p>
      <p style="color: white" id="tdl"></p>
      <p style="color: white" id="nilaidayahalaman"></p>
      <p style="color: white" id="nilaidayaruangtamu"></p>
      <p style="color: white" id="nilaidayapump"></p>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>

    <script id="MainScript">
      var firebaseConfig = {
        apiKey: "AIzaSyCOkbZJYFDDPZxoYt4VhkUEUjOaKMcGnLo",
        authDomain: "iotse-b1c10.firebaseapp.com",
        databaseURL: "https://iotse-b1c10-default-rtdb.firebaseio.com",
        projectId: "iotse-b1c10",
        storageBucket: "iotse-b1c10.appspot.com",
        messagingSenderId: "270480060594",
        appId: "1:270480060594:web:6cbccdbb40e653c14e99ab",
      };
      firebase.initializeApp(firebaseConfig);

      var pilihtahun = document.getElementById("pilihtahun");
      var pilihbulan = document.getElementById("pilihbulan");
      var pilihhari = document.getElementById("pilihhari");
      var nilairelay1 = document.getElementById("nilairelay1");
      var nilairelay2 = document.getElementById("nilairelay2");
      var nilairelay3 = document.getElementById("nilairelay3");
      var tdl = document.getElementById("tdl");
      var nilaidayahalaman = document.getElementById("nilaidayahalaman");
      var nilaidayaruangtamu = document.getElementById("nilaidayaruangtamu");
      var nilaidayapump = document.getElementById("nilaidayapump");
      function Rekap() {
        firebase
          .database()
          .ref()
          .child(pilihtahun.value)
          .child(pilihbulan.value)
          .child(pilihhari.value)
          .child("PenggunaanRelay1")
          .on("value", (snap) => (nilairelay1.innerText = snap.val()));
        firebase
          .database()
          .ref()
          .child(pilihtahun.value)
          .child(pilihbulan.value)
          .child(pilihhari.value)
          .child("PenggunaanRelay2")
          .on("value", (snap) => (nilairelay2.innerText = snap.val()));
        firebase
          .database()
          .ref()
          .child(pilihtahun.value)
          .child(pilihbulan.value)
          .child(pilihhari.value)
          .child("PenggunaanRelay3")
          .on("value", (snap) => (nilairelay3.innerText = snap.val()));
        firebase
          .database()
          .ref()
          .child("tdc")
          .on("value", (snap) => (tdl.innerText = snap.val()));
        firebase
          .database()
          .ref()
          .child("dayahalaman")
          .on("value", (snap) => (nilaidayahalaman.innerText = snap.val()));
        firebase
          .database()
          .ref()
          .child("dayaruangtamu")
          .on("value", (snap) => (nilaidayaruangtamu.innerText = snap.val()));
        firebase
          .database()
          .ref()
          .child("dayapump")
          .on("value", (snap) => (nilaidayapump.innerText = snap.val()));

        var vr1 = nilairelay1.textContent;
        var nvr1 = Number(vr1) / 3600;
        var vr2 = nilairelay2.textContent;
        var nvr2 = Number(vr2) / 3600;
        var vr3 = nilairelay3.textContent;
        var nvr3 = Number(vr3) / 3600;
        var vtdl = tdl.textContent;
        var ntdl = Number(vtdl);
        var vdh = nilaidayahalaman.textContent;
        var ndh = Number(vdh);
        var vdrt = nilaidayaruangtamu.textContent;
        var ndrt = Number(vdrt);
        var vdp = nilaidayapump.textContent;
        var ndp = Number(vdp);

        var a = ((nvr1 * ndh) / 1000) * ntdl;
        var b = ((nvr2 * ndrt) / 1000) * ntdl;
        var c = ((nvr3 * ndp) / 1000) * ntdl;
        var biayaharianhalaman = (document.getElementById(
          "biayaharianhalaman"
        ).innerText = a.toFixed(3));
        var biayaharianruangtamu = (document.getElementById(
          "biayaharianruangtamu"
        ).innerText = b.toFixed(3));
        var biayaharianpump = (document.getElementById(
          "biayaharianpump"
        ).innerText = c.toFixed(3));

        var d = a + b + c;
        var biayabulanan = (document.getElementById("biayabulanan").innerText =
          d.toFixed(3));
      }
    </script>
  </body>
</html>
