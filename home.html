<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Internet of Things</title>
    <link rel="stylesheet" href="style1.css" />
  </head>
  <body>
    <div class="container">
      <div class="navbar">
        <a href="home.html"
          ><img src="image/image3.png" alt="" style="width: 200px"
        /></a>
        <nav></nav>
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <div class="navbar-nav">
            <a
              href="setting.html"
              class="nav-item nav-link"
              style="
                color: #707070;
                font-weight: bold;
                margin-right: 20px;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              "
              >SETTING</a
            >
            <a
              href="rakap.html"
              class="nav-item nav-link"
              style="
                color: #707070;
                font-weight: bold;
                margin-right: 20px;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              "
              >REKAP</a
            >
            <a
              href="index.html"
              class="nav-item nav-link"
              style="
                color: #707070;
                font-weight: bold;
                margin-right: 20px;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              "
              >LOGOUT</a
            >
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-6">
          <h1 style="color: #707070; font-size: 20px; margin-top: 20px">
            CONTROL ROOM
          </h1>
          <div class="row">
            <div
              class="col-3"
              style="
                background-color: lightblue;
                height: 300px;
                width: 200px;
                border-radius: 10px;
                box-shadow: 20px;
                margin-right: 10px;
              "
            >
              <h1
                style="
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                  font-size: 15px;
                  color: #707070;
                  text-align: center;
                  margin-top: 20px;
                "
              >
                LAMPU HALAMAN
              </h1>
              <h1
                style="
                  font-size: 15px;
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                  color: #707070;
                  text-align: center;
                "
                id="halstatus"
              >
                STATUS
              </h1>
              <span class="dot" id="statushalaman"></span>
              <div class="row" style="margin-top: 20px; padding: 20px">
                <div class="col">
                  <button
                    style="
                      background-color: greenyellow;
                      height: 30px;
                      width: 70px;
                      font-family: 'Segoe UI', Tahoma, Geneva, Verdana,
                        sans-serif;
                      font-weight: bold;
                      border-radius: 10px;
                    "
                    onclick="halamanon()"
                  >
                    ON
                  </button>
                </div>
                <div class="col">
                  <button
                    style="
                      background-color: crimson;
                      height: 30px;
                      width: 70px;
                      font-family: 'Segoe UI', Tahoma, Geneva, Verdana,
                        sans-serif;
                      font-weight: bold;
                      border-radius: 10px;
                    "
                    onclick="halamanoff()"
                    onload="colorhalaman()"
                  >
                    OFF
                  </button>
                </div>
              </div>
            </div>
            <div
              class="col-3"
              style="
                background-color: lightblue;
                height: 300px;
                width: 200px;
                border-radius: 10px;
                box-shadow: 20px;
                margin-right: 10px;
              "
            >
              <h1
                style="
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                  font-size: 15px;
                  color: #707070;
                  text-align: center;
                  margin-top: 20px;
                "
              >
                LAMPU RUANG TAMU
              </h1>
              <h1
                style="
                  font-size: 15px;
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                  color: #707070;
                  text-align: center;
                "
                id="rungstatus"
              >
                STATUS
              </h1>
              <span class="dot" id="statusruangtamu"></span>
              <div class="row" style="margin-top: 20px; padding: 20px">
                <div class="col">
                  <button
                    style="
                      background-color: greenyellow;
                      height: 30px;
                      width: 70px;
                      font-family: 'Segoe UI', Tahoma, Geneva, Verdana,
                        sans-serif;
                      font-weight: bold;
                      border-radius: 10px;
                    "
                    onclick="ruangtamuon()"
                  >
                    ON
                  </button>
                </div>
                <div class="col">
                  <button
                    style="
                      background-color: crimson;
                      height: 30px;
                      width: 70px;
                      font-family: 'Segoe UI', Tahoma, Geneva, Verdana,
                        sans-serif;
                      font-weight: bold;
                      border-radius: 10px;
                    "
                    onclick="ruangtamuoff()"
                  >
                    OFF
                  </button>
                </div>
              </div>
            </div>
            <div
              class="col-3"
              style="
                background-color: lightblue;
                height: 300px;
                width: 200px;
                border-radius: 10px;
                box-shadow: 20px;
              "
            >
              <h1
                style="
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                  font-size: 15px;
                  color: #707070;
                  text-align: center;
                  margin-top: 20px;
                "
              >
                DC MINI PUMP
              </h1>
              <h1
                style="
                  font-size: 15px;
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                  color: #707070;
                  text-align: center;
                "
                id="pumpstatus"
              >
                STATUS
              </h1>
              <span class="dot" id="statuspump"></span>
              <div class="row" style="margin-top: 20px; padding: 20px">
                <div class="col">
                  <button
                    style="
                      background-color: greenyellow;
                      height: 30px;
                      width: 70px;
                      font-family: 'Segoe UI', Tahoma, Geneva, Verdana,
                        sans-serif;
                      font-weight: bold;
                      border-radius: 10px;
                    "
                    onclick="pumpon()"
                  >
                    ON
                  </button>
                </div>
                <div class="col">
                  <button
                    style="
                      background-color: crimson;
                      height: 30px;
                      width: 70px;
                      font-family: 'Segoe UI', Tahoma, Geneva, Verdana,
                        sans-serif;
                      font-weight: bold;
                      border-radius: 10px;
                    "
                    onclick="pumpoff()"
                  >
                    OFF
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-6" style="height: 400px; width: 400px; margin-top: 5px">
          <h1
            style="
              color: #707070;
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              font-size: 20px;
            "
          >
            Temperature
          </h1>
          <div
            class="row"
            style="
              background-color: whitesmoke;
              height: 180px;
              border-radius: 20px;
            "
          >
            <img
              src="image/temperature.png"
              alt=""
              height="100px"
              width="100px"
              style="margin-left: 20px"
            />
            <h1
              style="
                font-size: 100px;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                color: #707070;
              "
              id="temperature"
            >
              100
            </h1>
            <div>
              <h1
                style="
                  font-size: 20px;
                  margin-right: 40px;
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                "
              >
                Celcius
              </h1>
              <h1 style="height: 50px"></h1>
            </div>
          </div>
          <h1
            style="
              color: #707070;
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              font-size: 20px;
            "
          >
            Kelembapan
          </h1>
          <div
            class="row"
            style="
              background-color: whitesmoke;
              height: 180px;
              border-radius: 20px;
            "
          >
            <img
              src="image/humadity.png"
              alt=""
              height="100px"
              width="100px"
              style="margin-left: 20px"
            />
            <h1
              style="
                font-size: 100px;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                color: #707070;
              "
              id="humidity"
            >
              100
            </h1>
            <div>
              <h1
                style="
                  font-size: 20px;
                  margin-right: 40px;
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                "
              >
                %
              </h1>
              <h1 style="height: 50px"></h1>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>

    <script id="MainScript">
      var firebaseConfig = {
        apiKey: "AIzaSyCOkbZJYFDDPZxoYt4VhkUEUjOaKMcGnLo",
        authDomain: "iotse-b1c10.firebaseapp.com",
        databaseURL: "https://iotse-b1c10-default-rtdb.firebaseio.com",
        projectId: "iotse-b1c10",
        storageBucket: "iotse-b1c10.appspot.com",
        messagingSenderId: "270480060594",
        appId: "1:270480060594:web:6cbccdbb40e653c14e99ab",
      };
      firebase.initializeApp(firebaseConfig);

      var temperature = document.getElementById("temperature");
      var humidity = document.getElementById("humidity");
      var statusrelay1 = document.getElementById("statusrelay1");
      var statusrelay2 = document.getElementById("statusrelay2");
      var statusrelay3 = document.getElementById("statusrelay3");
      var Status = document.getElementById("Status");
      var dbRef = firebase.database().ref().child("temperature");
      dbRef.on("value", (snap) => (temperature.innerText = snap.val()));
      var dbRef = firebase.database().ref().child("humidity");
      dbRef.on("value", (snap) => (humidity.innerText = snap.val()));
      var dbRef = firebase.database().ref().child("statusrelay1");
      dbRef.on("value", (snap) => (statusrelay1.innerText = snap.val()));
      var dbRef = firebase.database().ref().child("statusrelay2");
      dbRef.on("value", (snap) => (statusrelay2.innerText = snap.val()));
      var dbRef = firebase.database().ref().child("statusrelay3");
      dbRef.on("value", (snap) => (statusrelay3.innerText = snap.val()));
      var dbRef = firebase.database().ref().child("Status");
      dbRef.on("value", (snap) => (Status.innerText = snap.val()));

      function auto() {
        firebase.database().ref("mode").set("ON");
        firebase.database().ref("Status").set("AUTO");
      }
      function manual() {
        firebase.database().ref("mode").set("OFF");
        firebase.database().ref("Status").set("MANUAL");
      }

      function halamanon() {
        firebase.database().ref("relay1").set("ON");
      }
      function halamanoff() {
        firebase.database().ref("relay1").set("OFF");
      }
      function ruangtamuon() {
        firebase.database().ref("relay2").set("ON");
      }
      function ruangtamuoff() {
        firebase.database().ref("relay2").set("OFF");
      }
      function pumpon() {
        firebase.database().ref("relay3").set("ON");
      }
      function pumpoff() {
        firebase.database().ref("relay3").set("OFF");
      }
      var statushal = document.getElementById("halstatus");
      var statusrung = document.getElementById("rungstatus");
      var statuspump = document.getElementById("pumpstatus");
      var dbRef = firebase.database().ref().child("statusrelay1");
      var dbRef2 = firebase.database().ref().child("statusrelay2");
      var dbRef3 = firebase.database().ref().child("statusrelay3");
      var a = dbRef.on("value", (snap) => (statushal.innerText = snap.val()));
      dbRef2.on("value", (snap) => (statusrung.innerText = snap.val()));
      dbRef3.on("value", (snap) => (statuspump.innerText = snap.val()));

      firebase
        .database()
        .ref()
        .child("statuscolor")
        .on("value", (snap) => {
          document.getElementById("statushalaman").style.backgroundColor =
            snap.val();
        });
      firebase
        .database()
        .ref()
        .child("statuscolor2")
        .on("value", (snap) => {
          document.getElementById("statusruangtamu").style.backgroundColor =
            snap.val();
        });
      firebase
        .database()
        .ref()
        .child("statuscolor3")
        .on("value", (snap) => {
          document.getElementById("statuspump").style.backgroundColor =
            snap.val();
        });
    </script>
  </body>
</html>
